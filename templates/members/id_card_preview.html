{% extends 'base.html' %}

{% block title %}ID Card Preview - NAAS{% endblock %}

{% block content %}
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="text-center mb-4">
                    <h2 class="text-dark-green">Your NAAS ID Card</h2>
                    <p class="text-muted">Preview and download your digital membership ID card</p>
                </div>
                
                <!-- ID Card Preview -->
                <div class="id-card-preview mb-4">
                    <div class="id-card-header">
                        <h5 class="text-gold mb-1">NATIONAL ASSOCIATION</h5>
                        <h5 class="text-gold mb-2">OF ANKPA STUDENTS</h5>
                        <small>(NATIONAL BODY)</small>
                        <div class="mt-2">MEMBER ID CARD</div>
                    </div>
                    <div class="id-card-body">
                        {% if member.passport_photo %}
                        <img src="{{ member.passport_photo.url }}" alt="Photo" class="id-card-photo">
                        {% else %}
                        <div class="id-card-photo-placeholder">
                            <i class="bi bi-person-fill text-muted" style="font-size: 3rem;"></i>
                        </div>
                        {% endif %}
                        
                        <h5 class="text-dark-green mb-2">{{ user.get_full_name|upper|default:"YOUR NAME" }}</h5>
                        <p class="mb-1"><strong>ID:</strong> {{ member.membership_id|default:"NAAS-ANKPA-XXXX-XXXX" }}</p>
                        <p class="mb-1"><strong>School:</strong> {{ member.school|default:"Not specified" }}</p>
                        <p class="mb-1"><strong>Department:</strong> {{ member.department|default:"Not specified" }}</p>
                        <p class="mb-1"><strong>Level:</strong> {{ member.level|default:"N/A" }}</p>
                        <p class="mb-3"><strong>Chapter:</strong> {{ member.chapter|default:"Not specified" }}</p>
                        
                        <div class="border rounded p-3 mb-3" style="background: #f8f9fa;">
                            <i class="bi bi-qr-code" style="font-size: 4rem;"></i>
                            <p class="small text-muted mb-0">Scan to verify</p>
                        </div>
                    </div>
                </div>
                
                <!-- Actions -->
                <div class="text-center">
                    {% if member.membership_id %}
                    <a href="{% url 'members:generate_id_card' %}" class="btn btn-dark-green btn-lg">
                        <i class="bi bi-download me-2"></i>Download ID Card (PNG)
                    </a>
                    {% else %}
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        Your membership ID is being generated. Please refresh the page or complete your profile.
                    </div>
                    {% endif %}
                    
                    <div class="mt-3">
                        <a href="{% url 'members:profile_edit' %}" class="btn btn-outline-secondary">
                            <i class="bi bi-pencil me-2"></i>Update Profile
                        </a>
                        <a href="{% url 'members:dashboard' %}" class="btn btn-outline-secondary">
                            Back to Dashboard
                        </a>
                    </div>
                </div>
                
                {% if member.id_card_generated_at %}
                <div class="text-center mt-4">
                    <small class="text-muted">
                        Last generated: {{ member.id_card_generated_at|date:"F d, Y g:i A" }}
                    </small>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}
